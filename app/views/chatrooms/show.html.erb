  <title>Chatroom</title>
</head>
<body>
  <div id="chatroom">
    <div id="messages">
      <!-- Messages will be displayed here -->
    </div>
    <div id="options">
      <!-- Options for answers will be displayed here -->
    </div>
  </div>

  <script>
    const messagesContainer = document.getElementById("messages");
    const optionsContainer = document.getElementById("options");

    const chatData = [
      {
        question: "Quelle occasion ?",
        options: ["Option 1", "Option 2", "Option 3"]
      },
      {
        question: "Quel type de repas ?",
        options: ["Option A", "Option B", "Option C"]
      },
      // Add more question data here...
    ];

    let currentQuestionIndex = 0;

    function displayQuestionAndOptions() {
      const questionData = chatData[currentQuestionIndex];

      // Display the question
      const questionElement = document.createElement("div");
      questionElement.textContent = questionData.question;
      messagesContainer.appendChild(questionElement);

      // Display the options
      optionsContainer.innerHTML = "";
      questionData.options.forEach((option, index) => {
        const optionButton = document.createElement("button");
        optionButton.textContent = option;
        optionButton.addEventListener("click", () => handleOptionClick(index));
        optionsContainer.appendChild(optionButton);
      });
    }

    function handleOptionClick(selectedIndex) {
      const selectedOption = chatData[currentQuestionIndex].options[selectedIndex];

      // Send the selected option to the server for storage
      saveUserAnswer(selectedOption);

      currentQuestionIndex++;
      if (currentQuestionIndex < chatData.length) {
        displayQuestionAndOptions();
      } else {
        messagesContainer.textContent = "No more questions.";
        optionsContainer.innerHTML = "";
      }
    }

    function saveUserAnswer(selectedOption) {
      fetch('/answers', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRF-Token': '<%= form_authenticity_token.to_s %>'
        },
        body: JSON.stringify({ answer: selectedOption })
      });
    }

    displayQuestionAndOptions();
  </script>
</body>
</html>
